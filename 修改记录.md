todo list:
1. 快捷键问题：焦点从Edit/IpAddress使用快捷键移到按钮，再移到RichEdit，光标位置错误。
2. 有子窗口时，怎么指定默认焦点控件

更新列表：
2018-08-20
1. 解决子菜单与顶级菜单样式不一致问题。
   Demo中，子菜单圆角修复
   方法一：菜单窗体中使用分层窗口，即 layered 属性设置为true
   方法二：菜单窗体属性 roundcorner，设置与菜单背景图片边角合适的值
2. 解决属性表文件中特效属性名错误问题
3. 格式化特效代码文件，并移除多余的文件
4. 解决特效播放完毕没有解决控件重绘，导致控件显示内容没有更新的问题
5. 解决在子窗体上按TAB，父窗体切换焦点的问题
6. 去掉;前的空格

2018-08-19
1. 属性 focusbordercolor 改名为 focusedbordercolor
2. 修复布局控件自动计算宽度时，没有计算外边距的问题
3. 修复 valign 属性默认值没有生效的问题
4. 修复没有窗体关闭特效时，窗体无法关闭的问题
5. 修复快捷键导致编辑框不响应TAB切换焦点的问题
6. 窗体添加默认焦点控件属性 focusedctrl，窗体焦点自动落在该属性指定的控件上
   窗体焦点控件的设置：SetFocusNeeded
   已知问题：
   1. 存在子窗体时，父窗体Edit设置焦点无效；
   2. 子窗体TAB键切换焦点时，焦点转移到父窗体。

2018-08-18
1. 修复“添加背影图片对齐属性(5f1ad0d)”引入的DoPaint绘制逻辑错误。
2. 添加特效支持，5种特效触发器，84种特效。已知存在的问题：
   对于非分层窗体，非特效覆盖部分：显示特效时是黑色，隐藏特效时显示异常。
   解决思路：从特效算法中生成描述窗体形状的RGN，绘制特效时设置窗体RGN。
3. 修复控件首次显示时特效问题

2018-08-16
1. 属性中的img统一改为image
2. Slider 添加通知消息DUI_MSGTYPE_VALUECHANGING
   该消息说明用户正在拖动Slider，由用户决定怎么处理值变化
3. 修复 Combo 控件展开后不会自动定位到上次选择的位置的问题
4. Slider 鼠标滚轮事件，先发送DUI_MSGTYPE_VALUECHANGING，延时300毫秒再发送DUI_MSGTYPE_VALUECHANGED

2018-08-15
1. 优化定时器ID分配
2. CDuiValArray 添加接口，支持根据 Item 指针执行删除操作
3. UIRender 添加接口返回 AlphaBlend 函数地址
4. 优化函数 CreateARGB32Bitmap，GenerateBitmap
5. 优化 共享/私有 默认属性。
   GetDefaultAttributeList 接口添加参数 bShared，标识获取 共享/私有 默认属性。
   创建控件时，先添加 共享 默认属性，再添加 私有 默认属性，最后添加与控件写在一起的属性。
   以此形成 3 个优先级的属性设置，从低到高为：共享默认属性，私有默认属性，与控件写在一起的属性。
   应用场景说明：
   1. 共享默认属性写到一个单独的文件中，在窗体描述 XML 文件中，使用 Include 引入，实现全局样式统一；
   2. 在窗体描述文件中，使用 私有默认属性，增加/覆盖 共享默认属性，实现窗体之间的自定义；
   3. 在窗体描述文件中，同一类型的控件需要不同样式时，直接与控件写在一起，实现窗体内控件的自定义。
6. 添加属性 selectedbordercolor 表示控件处于选择状态时的边框颜色
7. 修复一处关闭子窗体可能导致崩溃的bug
8. 移除菜单控件中一个多余的属性列表设置接口
9. 修复 共享/私有 默认属性设置顺序错误的问题。

2018-08-07
1. 解决启用字符过滤的Edit中按回车键删除字符的问题
2. 优化定时器ID分配

2018-08-06
1. 修复快捷键问题
   问题描述：Edit设置快捷键E，RichEdit设置快捷键R，在RichEdit中按下E键时，焦点自动切换到Edit。
   仍存在的问题：焦点从Edit/IpAddress使用快捷键移到按钮（鼠标位于Edit上，并且光标仍在编辑框中），
     再移到RichEdit，光标位置错误。
2. 修复Label及派生类支持多行时，总是自动计算宽度的问题

2018-08-03
1. 优化子窗体占位符控件设置
2. 自动计算宽度、高度属性，变量定义移到Control根控件
3. 绝对布局控件，添加支持自动计算宽度、高度属性

2018-08-02
1. tag属性支持16进制写法
2. 解决子窗体框架错误用法可能导致的程序崩溃
3. 修复padding属性设置的bug
4. 解决容器子控件超出边框，但仍在外边距范围内，无法绘制的bug

2018-08-01
1. 修复编辑框焦点时不显示 tooltip 的问题。
2. 解决子窗体切换的时序，保证当前子窗体关闭前，执行 OnDataSave，再切换到新的子窗体。
3. 修复一处GDI对象泄漏问题。
4. 修复1导致有时鼠标移动到控件上时没有触发鼠标进入事件的问题。

2018-07-27
1. 添加 设置/获取 拥有者窗口句柄的接口。
   用于解决子窗口弹出的模态对话框销毁后，焦点转移到子窗口的父窗口的问题。
   默认情况下，子窗口不能作为模态对话框的拥有者。
   用法：模态对话框创建成功，显示之前，调用 SetOwner 把子窗口设置为弹出的模态对话框的拥有者。
2. 修复 1 引入的菜单bug。
3. 优化菜单，使其行为与 VS2013 相似。
4. 修复 GetParent 返回值问题。

2018-07-26
1. Button 控件支持 5 态背景色
2. Option 控件支持 选中/未选中 各 5 态背景色
3. Button/Option 支持拖放。

2018-07-25
1. 密码强度控件添加接口返回当前密码的强度。
2. 解决菜单弹出速度慢的问题。
   原因：DrawText 使用 CHDCHelper 解决字体穿透问题，但 CHDCHelper 速度很慢。
   解决：DrawText 计算文本占用矩形时，不使用 CHDCHelper 。
3. 解决 Edit 控件错误删除字符的问题。
   现象：Edit 设置了字符过滤属性，没有设置过滤条件，在编辑框中按键，会删除编辑框设置的字符。

2018-07-23
1. 修复 UIDlgBuilder 默认图片导致的按钮(含单选/复选框)图片显示不正常的bug。
   显示不正常的表现为：不显示图片、显示未知区域的图像等。
   复现办法：
   1. 在默认样式xml文件中，添加需要共享的图片。如 <Image shared="true" file="close.png" />
   2. 在所有窗体的xml文件中, 使用 Include 引入默认样式的xml文件
   3. 在父窗体中创建模态对话框
   4. 关闭模态对话框
   5. 鼠标移动父窗体的按钮上，这时会发现按钮图片显示异常。

   原因：UIDlgBuilder 直接调用 UIManager::AddImage 添加共享图片，
   而AddImage内部会判断如果图片已添加会先Free前面添加的图片，再重新Load并添加，
   在此过程中没有做好资源保护，导致指针指向了非法地址。

2018-07-21
1. List 抬头默认左对齐
2. 修复 2018-07-14 引入的 DrawHtmlText 无法显示输出图片的问题。
3. 修复如果设置了属性 endellipsis，并且文本宽度大于控件宽度，DrawHtmlText 无法输出文本的问题。
4. 修复 TListInfoUI::bCheckBox 没在初始化导致列表项缩进不正确的问题

2018-07-20
1. 提供窗体数据修改状态的设置/查询接口
2. 优化浏览器控件绘制函数
3. 子窗体不创建阴影
4. 修复3引入的编译问题
5. 修复带复选框的List，复选框左对齐问题

2018-07-19
1. Label 文本默认属性由单行垂直居中改为单行，去掉垂直居中属性。
2. 解决 Label 多行时，不支持 垂直居中、靠下对齐问题。
3. Label,Text 控件全面支持多行时 垂直对齐。使用 valign 属性设置对齐方式。
4. 优化子窗口功能。

2018-07-18
1. 更新 miniblink49 到版本 18.7.16.1
2. 修复切换子窗口时，没有关闭前一个子窗口的问题
3. 修复一处 tooltip 导致的崩溃
4. 修复 DrawRoundRect bug
5. 添加 hotbordercolor 属性；优化边框绘制。

2018-07-17
1. CheckBox 添加属性 seltext（选中状态的文本），用于选中状态切换时，自动改变显示文本。
2. Window 添加属性 delayclick，控制单击/双击消息的系统特性。
   1. 默认false，系统默认特性，双击时发送单击再发送双击消息；
   2. true，系统区分单击/双击，双击时不会先发送单击消息，单击消息会有一个双击的最大时间间隔；
   3. 单击消息在首次弹起后发送；双击消息在第二次弹起后发送。
3. 添加右键单击、双击消息支持。
   控件需要用户添加单击、双击消息处理。
4. 修复控件外边距属性名。
   CSS盒子模型中，外边距用 margin 表示，因此表示外边距的 padding 统一改为 margin。
   duilib 使用的是 IE 的盒子模型，即控件的宽/高包含边框和padding；
   而标准的 W3C 盒子模型，宽/高不含边框和padding。
   以后需要时，可以为控件添加padding属性；此时textpadding在padding基础上计算。
5. 修复 单击/双击 冲突问题引入的新问题。
   鼠标在按钮上按下，移出按钮后弹起，仍会触发按钮单击消息。
6. Container 容器添加 margin 属性，等同于 padding 属性。
7. 规范消息定义

2018-07-16
1. 优化5态按钮背影图片属性设置。
   属性设置添加图片排列方向的参数，h|v 分别表示水平|垂直排列，与图片名用","分割。
   比如：fivestatusimage="v,five.png"
2. 按钮响应频率限制为[0,100]秒。
3. 图片添加 align|valign 属性，指明图片 水平|垂直 对齐方式，不会拉伸图片，会使 xtiled/ytiled 失效。

2018-07-15
1. 解决鼠标左键单击、双击冲突：双击时不发送单击消息，按下/弹起消息只处理控件状态。
   鼠标单击时，控件收到的消息：按下、弹起、单击
   鼠标双击时，控件收到的消息：按下、弹起、双击按下、弹起、双击
2. 按钮添加响应频率控制属性：下一次响应鼠标/键盘需要等待的秒数，0 表示关闭该特性。
   启用该特性后，按钮响应鼠标/键盘事件后，自动置为禁用状态，等待指定的秒数后，恢复为可用状态。
3. 统一定时器ID。DuiLib保留使用范围 [0~1023]，用户使用范围 {1024,}
4. 修复List没有表头时崩溃的问题。添加单击表头第一列。选择所有行功能时引入的。
5. 添加子窗体支持模型，详见类 CWndImplBase。
   支持同时最多显示一个子窗口；
   支持子窗口在父窗口占位布局控件大小/位置变化时自动改变大小/位置；
   支持类似 tab 标签页，每个标签页对应一个子窗口，用户单击控件时，调用 SwitchChildDlg 自动切换到关联的子窗口。

2018-07-14
1. 修复 DrawHtmlText 使用 gdi 时 aplha 值无效问题。

2018-07-12
1. 修复 DrawLine,DrawRect,DrawRoundRect,DrawText 4个函数使用 gdi 时 alpha 值无效问题。
   DrawHtmlText 仍然存在问题。

2018-07-09
1. 解决伪异形窗体中，RichEdit 光标不显示的问题。
   仍然存在的问题：文字穿透。
2. 解决 layered 属性设置问题
3. 解决伪异形窗体中，RichEdit 文字穿透问题。
4. 解决由于延时设置焦点到第一个控件，导致程序刚启动后鼠标在RichEdit上单击，焦点跑到第一个Edit控件，
   再次单击才能获取焦点的问题。
5. 优化RichEdit，禁用多行文本时，提示文件垂直居中。
6. 更新 miniblink49 到版本 18.7.5.1

2018-07-07
1. 优化标题栏判断，允许用户添加静态控件。
   当鼠标在标题栏上的静态控件上时，NcHitTest 返回 HTCAPTION，可以拖动窗体。
2. 解决伪异型窗体背影色穿透问题（RichEdit 仍然存在问题）。

2018-07-06
1. layeredimage 属性折分为 layered 和 shape 两个属性，layered 决定是否启用分层窗体，shape 用图片指定窗体形状。
   有两种方法创建异形窗体：layered + shape  和 layered + 根布局的 bkimage 属性。
   前者：图片可视区域范围外的控件（部分），无法显示，真异形。
   后者：图片可视区域范围外的控件（部分），可以显示，伪异形。字体/背影色上单击鼠标，以穿透窗体。
2. 标题栏高度设置，-1表示全窗口
3. 解决伪异形窗体，字体穿透问题，必须使用GDIPLUS。

2018-07-05
1. 优化duilib CWndImplBase::OnCreate，避免重复设置资源路径。
2. 浏览器控件添加前进/后退可行性判断接口

2018-07-04
1. 添加浏览器控件。有如下特点：
   1. 该控件是基于开源库 miniblink49 开发的，使用 wke 接口。
   2. duilib 在需要时动态加载 MB ,不需要时卸载。这样使得不需要浏览器控件的应用，不必附带 miniblink 库。
   3. duilib 将 wke 的接口重新导出,这样使用 duilib 的应用可以直接使用 wke 接口。
2. 添加浏览器控件 demo，优化浏览器控件
3. 添加 2018-06-28 版本的 miniblink(node.dll)

2018-07-01
1. 更新工程配置：ANSI 工程添加后缀 a，UNICODE 工程去掉后缀 u

2018-06-28
1. Button，Option，CheckBox，RadioBox，Text，HotKey，PwdCheck  支持特效字。

2018-06-27
1. 添加 autoheight 属性, 支持该属性的布局：CContainerUI，CVerticalLayoutUI

2018-06-25
1. CEditUI 添加内容变化延时通知属性(delaytxtchange)，可以指定延时多少毫秒后发送通知

2018-06-17
1. 修复一处拖拽功能可能引发的崩溃
2. 更新文件头注释格式

2018-06-15
1. 解决“修复Capture相关bug”引入的bug：在某些情况下会导致空指针引发崩溃。

2018-06-13
1. ListHBoxElement,ListContainerElement 及其派生类，List 启用 ischeckbox 时，实现如下特性:
   1. 可以查询指定列表项是否选中
   2. 提供接口设置所有列表项的选中状态，获取所有选中的列表项的索引
   3. 表头第一列是复选框时，用户单击该复选框，List 自动 选中/取消 列表中的所有项
2. 双击标题栏时，如果没有最大化/还原按钮，或者隐藏，则不执行窗口最大化/还原操作

2018-06-12
1. 解决上次提交遗留的，默认画笔样式画圆角边框，宽度不够的问题。
   说明：4个边框都存在时，采用默认或用户设置的画笔样式；否则强制采用特殊样式画笔。
         在不设置画笔样式时，各种边框粗细组合都能适配。

2018-06-10
1. 增强快捷键定义。支持形如 CTRL+ALT+P 的快捷键。
2. 解决TreeNode不支持Default设置默认属性的问题。
   默认属性的写法有所改变，folderattr 等复合属性的值用 ? 包起来，如下所示：
   <Default name="TreeNode" value="text=&quot;abc&quot; folderattr=?width=&quot;16&quot; height=&quot;16&quot; ? " />
3. 优化菜单项单击消息：1上下文菜单通知改为异步 2菜单项单击消息在wParam参数中携带鼠标位置信息客户(坐标)
4. 优化控件边框颜色绘制，允许只绘制部分边框。

2018-06-09
1. 解决 CLabelUI 更新显示字符串后，不会自动计算宽度的问题。
   只要设置了自动计算宽度，不论有没有设置宽度，都会自动计算宽度。
2. CButtonUI，COptionUI，CCheckBoxUI，CRadioBoxUI 添加支持自动计算宽度
3. 背影色渐变，支持水平、垂直渐变
4. 解决切换语言时，带自动计算宽度的控件没有重新计算宽度的问题
5. 最大控件宽度使用宏定义

2018-06-08
1. CListUI 添加属性 ischeckbox/unselimg/selimg, CListTextElementUI 做为列表项时支持复选框多选；
   CListContainerElementUI 及其派生类，不支持该特性。
2. CButtonGroup 支持设置控件选择状态
3. 添加菜单阴影

2018-06-06
1. 多语言字符串的写法由 %{}修改为 %[]。原因是 {} 是duilib内嵌html支持的标签引导符。
2. 代码文件转换为 UTF-8 BOM
3. 优化工程配置

2018-06-04
1. 从 duilib/duilib 同步代码(e026aa0)：
 1. 修复创建窗体阴影的bug
 2. 定义宏 DUI_DEPRECATED 用于将不建议使用的方法标记为已弃用
 3. 修复某些 DPI 设置下图标模糊
 4. 退出消息循环时，返回退出参数
2. 支持 autowidth 属性的布局：CContainerUI，CHorizontalLayoutUI，CHWeightLayoutUI
   支持 autowidth 属性的控件：CLabelUI,CTextUI,CEditUI,CDateTimeUI
3. 支持拖放的控件：CControlUI,CActiveXUI,CFlashUI,CGifAnimUI,CLabelUI,CTextUI
   支持 放 的控件：CEditUI
4. 修复编辑框焦点状态显示tooltip，引入的不能选择内容的问题
5. 代码文件转换为 UTF-8 BOM

2018-05-23
1. 单击事件统一在 左键或右键弹起时发送
2. CDuiString 内部字符数组初始长度由63改为31
3. 修复Capture相关bug
4. 优化 ActiveX/Flash 控件
5. 修复编辑框获得焦点后，不显示Tooltip的问题

2018-04-25
1. 扩展CTileLayoutUI，添加childrounded/rows属性，支持子控件铺满布局
2. 扩展COptionUI，添加bindtablayout/bindtabindex属性，支持自动切换tab页面
3. 添加拖拽支持。
4. List 添加双击事件

2018-04-15
1. 修复菜单控件bug
2. RichEdit 添加默认提示信息及其颜色属性，用户输入文本后消失
3. CListHeaderItemUI 改从 CContainerUI 继承，支持添加子控件
4. 给 CContainerUI 和 CLabelUI 添加 autowidth 属性，所有从这两个控件继承的控件，都会受影响
   1. 已验证的控件：CLabelUI,CTextUI,CEditUI
   2. 已验证的布局：CContainerUI,CHorizontalLayoutUI
   3. 不支持的控件：CRichEdit,CVerticalLayoutUI

2018-04-09
1. 融合窗体阴影类，可以在 xml 中设置窗体阴影。支持算法/图片阴影。
2. 优化 GdiPlus 用法，使用宏 USE_GDIPLUS 控制
3. RadioBtn 改为 RadioBox
4. CWndImplBase 添加窗口初始化虚函数，在窗口创建成功后，数据初始化之前调用
5. 优化 CWndImplBase，窗体创建|显示 / 销毁|隐藏 时调用数据初始化 / 保存接口
6. CWndImplBase 添加 OnPrepare 虚函数，窗体布局正确初始化时调用
7. Container 添加根据 Tag/UserData 查找子控件接口
8. Combo 添加根据 Tag/UserData 选择子项接口
9. 为单选按钮添加 CButtonGroup 帮助类

2018-04-02
1. 添加带权重的水平布局控件
   1. 控件没有设置大小：平均分配多余的空间，直到不显示
   2. 空间不足时，按权重从小到大的顺序，缩减控件可调整的空间至最小
   3. 如果空间仍旧不足，按权重从小到大的顺序，依次隐藏控件
   4. 注意：Edit控件拥有窗口句柄，因此需要放在布局控件中，给布局控件设置权重，才能支持该特性

2018-03-29
1. 优化多语言支持
2. 添加颜色透明显示

2018-03-23
1. 添加 IP 控件
2. 去掉 nativebkcolor 属性，与 bkcolor 属性值保持一致

2018-03-07
1. 添加密码强度检测类 CPwdCheckUI
2. 修复编辑框仅输入数字且最小值是0时，可以输入一串0的问题；删除数字左侧无意义的0

2018-02-27
1. 更新 XUnzip 库，添加头文件、_USE_32BIT_TIME_T(使用32位time_t)
2. 更新 CGifAnimUI 类，使用 stb_image 重新实现

2018-02-03
1. 属性 regexp，支持编辑框使用正则表达式过滤输入

2018-01-30
1. 修复图片平铺绘制问题
2. 优化复选框控件，5态按钮
3. 添加单选框控件，5态按钮
4. Button 添加鼠标悬浮状态背景色，Option 添加选中时鼠标悬浮、正常状态背景色

2018-01-28
1. 调整目录结构
2. 编辑框添加属性 itemendellipsis
3. 添加字符过滤功能

2018-01-25
1.  修复多语言切换问题
2.  从工程中移除 CWebBrowserUI
    Control/UIWebBrowser.cpp, Control/UIWebBrowser.h, Utils/WebBrowserEventHandler.h

2017-07-22 
1.  Edit 添加 minmaxnumber 属性，检测数字模式时是否越界

2017-02-25 
1.  调整工程目录结构，include/duilib 为引用duilib的头文件目录，src为duilib源码目录
2.  动态库工程添加静态库工程配置，删除静态库工程文件；DuiLib 静态链接运行库
3.  重新校准属性列表，省略继承自父类的属性
4.  完善多语言支持，添加多语言 XML 文件属性及加载
5.  添加观察者模式
6.  添加 HotKey 控件
7.  添加 Menu 控件，支持动态增删菜单项、支持复选状态菜单项、支持键盘等功能，优化菜单属性，减少菜单 XML 编写复杂度
    菜单控件已知 bug：
    1.子菜单不能在 xml 文件中指定隐藏
    2.在Debug模式调试器中运行时，展开子菜单项，调试器收收到一条First Exception打印，但不影响使用
8.  使用新的菜单控件更新 MenuDemo/ListDemo 示例
9.  文本编辑框增加默认提示信息及其颜色属性，获取焦点时提示信息消失
10.  修复 List 控件 UIEVENT_KEYDOWN 事件响应中，case 语句没有 break 的 bug
11. 修改 Button/Text 上下文菜单消息，处理完后不直接return，而是传递给父控件。方便在复杂组合控件中响应上下文菜单。
12. 添加 Button/Control 左键双击消息

朱亚东
